<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูููุฒุงุช ุงูุชูุงุนููุฉ - ClassWithOnline</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script>
</head>
<body>
    <!-- ุฑุฃุณ ุงููููุน -->
    <header>
        <div class="header-container">
            <a href="../index.html" class="logo">๐ ClassWithOnline - ุงูููุฒุงุช ุงูุชูุงุนููุฉ</a>
            <nav>
                <ul>
                    <li><a href="index.html">ููุญุฉ ุงูุชุญูู</a></li>
                    <li><a href="../index.html">ุงูุนูุฏุฉ ูููููุน</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
    <div class="container">
        <!-- ุงูุดุฑูุท ุงูุฌุงูุจู -->
        <aside class="sidebar">
            <h3>ุงูุฎูุงุฑุงุช</h3>
            <ul>
                <li><a href="#quizzes" class="active">ุงูุงุฎุชุจุงุฑุงุช</a></li>
                <li><a href="#messages">ุงูุฑุณุงุฆู</a></li>
                <li><a href="#notifications">ุงูุชูุจููุงุช</a></li>
                <li><a href="#quiz-results">ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช</a></li>
            </ul>
        </aside>

        <!-- ุงููุญุชูู -->
        <main class="content">
            <!-- ูุณู ุงูุงุฎุชุจุงุฑุงุช -->
            <section id="quizzes">
                <h1>โ๏ธ ุฅุฏุงุฑุฉ ุงูุงุฎุชุจุงุฑุงุช ุงููุญุงูุงุฉ</h1>

                <h2>ุฅูุดุงุก ุงุฎุชุจุงุฑ ุฌุฏูุฏ</h2>
                <form id="quiz-form" onsubmit="handleCreateQuiz(event)">
                    <div class="form-group">
                        <label for="quiz-title">ุนููุงู ุงูุงุฎุชุจุงุฑ *</label>
                        <input type="text" id="quiz-title" placeholder="ูุซุงู: ุงุฎุชุจุงุฑ ุงูููุงุนุฏ ุงููุญููุฉ" required>
                    </div>

                    <div class="form-group">
                        <label for="quiz-description">ูุตู ุงูุงุฎุชุจุงุฑ</label>
                        <textarea id="quiz-description" placeholder="ุฃุฏุฎู ูุตู ุงูุงุฎุชุจุงุฑ"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="quiz-difficulty">ูุณุชูู ุงูุตุนูุจุฉ</label>
                        <select id="quiz-difficulty">
                            <option value="easy">ุณูู</option>
                            <option value="medium" selected>ูุชูุณุท</option>
                            <option value="hard">ุตุนุจ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="quiz-time-limit">ุญุฏ ุฒููู (ุฏูููุฉ)</label>
                        <input type="number" id="quiz-time-limit" placeholder="0 = ุจุฏูู ุญุฏ ุฒููู" min="0">
                    </div>

                    <h3>ุงูุฃุณุฆูุฉ</h3>
                    <div id="questions-container">
                        <div class="question-item" data-question="0">
                            <h4>ุงูุณุคุงู 1</h4>
                            <div class="form-group">
                                <label>ูุต ุงูุณุคุงู *</label>
                                <input type="text" class="question-text" placeholder="ุฃุฏุฎู ูุต ุงูุณุคุงู" required>
                            </div>

                            <div class="form-group">
                                <label>ุงูุฎูุงุฑุงุช (ููุตููุฉ ุจูุงุตูุฉ) *</label>
                                <input type="text" class="question-options" placeholder="ุงูุฎูุงุฑ 1, ุงูุฎูุงุฑ 2, ุงูุฎูุงุฑ 3, ุงูุฎูุงุฑ 4" required>
                            </div>

                            <div class="form-group">
                                <label>ุฑูู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ (1, 2, 3...) *</label>
                                <input type="number" class="question-answer" min="1" placeholder="1" required>
                            </div>

                            <button type="button" class="btn btn-danger" onclick="removeQuestion(this)">ุญุฐู ุงูุณุคุงู</button>
                            <hr>
                        </div>
                    </div>

                    <button type="button" class="btn btn-warning" onclick="addQuestion()">โ ุฅุถุงูุฉ ุณุคุงู</button>
                    <button type="submit" class="btn btn-success btn-block" style="margin-top: 1rem;">ุฅูุดุงุก ุงูุงุฎุชุจุงุฑ</button>
                </form>

                <h2 style="margin-top: 2rem;">ุงูุงุฎุชุจุงุฑุงุช ุงูููุฌูุฏุฉ</h2>
                <div id="quizzes-list" class="cards-grid">
                    <p>ุฌุงุฑู ุงูุชุญููู...</p>
                </div>
            </section>

            <!-- ูุณู ุงูุฑุณุงุฆู -->
            <section id="messages" style="margin-top: 3rem; display: none;">
                <h1>๐ฌ ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู</h1>

                <h2>ุงูุฑุณุงุฆู ุงูุฃุฎูุฑุฉ</h2>
                <div id="messages-list" class="messages-container">
                    <p style="padding: 1rem;">ุฌุงุฑู ุงูุชุญููู...</p>
                </div>

                <h2 style="margin-top: 2rem;">ุฅุฑุณุงู ุฑุณุงูุฉ ุนุงูุฉ</h2>
                <form id="broadcast-message-form" onsubmit="handleBroadcastMessage(event)">
                    <div class="form-group">
                        <label for="broadcast-sender">ูู (ุงูุงุณู)</label>
                        <input type="text" id="broadcast-sender" placeholder="ูุซุงู: ุงููุฏูุฑ" required>
                    </div>

                    <div class="form-group">
                        <label for="broadcast-text">ูุต ุงูุฑุณุงูุฉ</label>
                        <textarea id="broadcast-text" placeholder="ุงูุชุจ ุงูุฑุณุงูุฉ ุงูุนุงูุฉ" required></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">ุฅุฑุณุงู ุงูุฑุณุงูุฉ</button>
                </form>
            </section>

            <!-- ูุณู ุงูุชูุจููุงุช -->
            <section id="notifications" style="margin-top: 3rem; display: none;">
                <h1>๐ ุฅุฏุงุฑุฉ ุงูุชูุจููุงุช</h1>

                <h2>ุฅุฑุณุงู ุชูุจูู ุฌุฏูุฏ</h2>
                <form id="notification-form" onsubmit="handleCreateNotification(event)">
                    <div class="form-group">
                        <label for="notif-title">ุนููุงู ุงูุชูุจูู *</label>
                        <input type="text" id="notif-title" placeholder="ูุซุงู: ุชุญุฏูุซ ุฌุฏูุฏ ูุชุงุญ" required>
                    </div>

                    <div class="form-group">
                        <label for="notif-message">ูุต ุงูุชูุจูู *</label>
                        <textarea id="notif-message" placeholder="ุฃุฏุฎู ูุต ุงูุชูุจูู" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="notif-type">ููุน ุงูุชูุจูู *</label>
                        <select id="notif-type" required>
                            <option value="info">ูุนูููุฉ</option>
                            <option value="success">ูุฌุงุญ</option>
                            <option value="warning">ุชุญุฐูุฑ</option>
                            <option value="danger">ุฎุทุฑ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="notif-priority">ุงูุฃููููุฉ</label>
                        <select id="notif-priority">
                            <option value="normal">ุนุงุฏู</option>
                            <option value="high">ูุฑุชูุน</option>
                            <option value="urgent">ุนุงุฌู</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-success btn-block">ุฅุฑุณุงู ุงูุชูุจูู</button>
                </form>

                <h2 style="margin-top: 2rem;">ุงูุชูุจููุงุช ุงูุฃุฎูุฑุฉ</h2>
                <div id="notifications-list">
                    <p>ุฌุงุฑู ุงูุชุญููู...</p>
                </div>
            </section>

            <!-- ูุณู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช -->
            <section id="quiz-results" style="margin-top: 3rem; display: none;">
                <h1>๐ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช</h1>

                <h2>ุฅุญุตุงุฆูุงุช ุนุงูุฉ</h2>
                <div id="quiz-stats-container" class="cards-grid">
                    <p>ุฌุงุฑู ุงูุชุญููู...</p>
                </div>

                <h2 style="margin-top: 2rem;">ุชูุงุตูู ุงููุชุงุฆุฌ</h2>
                <div id="quiz-results-details">
                    <p>ุฌุงุฑู ุงูุชุญููู...</p>
                </div>

                <button class="btn btn-primary" onclick="exportQuizResults()" style="margin-top: 1rem;">
                    ๐ฅ ุชุตุฏูุฑ ุงููุชุงุฆุฌ (CSV)
                </button>
            </section>
        </main>
    </div>

    <!-- ุงูุชุฐููู -->
    <footer>
        <p>&copy; 2024 ููุตุฉ ClassWithOnline - ุงูููุฒุงุช ุงูุชูุงุนููุฉ</p>
    </footer>

    <!-- ูููุงุช JavaScript -->
    <script src="../assets/js/firebase-app.js"></script>
    <script src="../assets/js/admin-functions.js"></script>
    <script>
        /**
         * ูุนุงูุฌ ุฅูุดุงุก ุงุฎุชุจุงุฑ ุฌุฏูุฏ
         */
        function handleCreateQuiz(event) {
            event.preventDefault();

            const title = document.getElementById('quiz-title').value;
            const description = document.getElementById('quiz-description').value;
            const difficulty = document.getElementById('quiz-difficulty').value;
            const timeLimit = document.getElementById('quiz-time-limit').value || 0;
            const questions = {};

            document.querySelectorAll('.question-item').forEach((item, index) => {
                const text = item.querySelector('.question-text').value;
                const optionsStr = item.querySelector('.question-options').value;
                const correctAnswerIndex = parseInt(item.querySelector('.question-answer').value) - 1;

                const options = {};
                optionsStr.split(',').forEach((opt, i) => {
                    options[i] = opt.trim();
                });

                questions[index] = {
                    text: text,
                    options: options,
                    correctAnswer: correctAnswerIndex
                };
            });

            const quiz = {
                title: title,
                description: description,
                difficulty: difficulty,
                time_limit: parseInt(timeLimit),
                questions: questions,
                created_at: new Date().toISOString()
            };

            addToFirebase('quizzes', quiz).then(() => {
                document.getElementById('quiz-form').reset();
                document.getElementById('questions-container').innerHTML = `
                    <div class="question-item" data-question="0">
                        <h4>ุงูุณุคุงู 1</h4>
                        <div class="form-group">
                            <label>ูุต ุงูุณุคุงู *</label>
                            <input type="text" class="question-text" placeholder="ุฃุฏุฎู ูุต ุงูุณุคุงู" required>
                        </div>

                        <div class="form-group">
                            <label>ุงูุฎูุงุฑุงุช (ููุตููุฉ ุจูุงุตูุฉ) *</label>
                            <input type="text" class="question-options" placeholder="ุงูุฎูุงุฑ 1, ุงูุฎูุงุฑ 2, ุงูุฎูุงุฑ 3, ุงูุฎูุงุฑ 4" required>
                        </div>

                        <div class="form-group">
                            <label>ุฑูู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ (1, 2, 3...) *</label>
                            <input type="number" class="question-answer" min="1" placeholder="1" required>
                        </div>

                        <button type="button" class="btn btn-danger" onclick="removeQuestion(this)">ุญุฐู ุงูุณุคุงู</button>
                        <hr>
                    </div>
                `;
                loadQuizzesForAdmin();
            });
        }

        /**
         * ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏ
         */
        function addQuestion() {
            const container = document.getElementById('questions-container');
            const questionCount = container.querySelectorAll('.question-item').length;

            const questionDiv = document.createElement('div');
            questionDiv.className = 'question-item';
            questionDiv.setAttribute('data-question', questionCount);
            questionDiv.innerHTML = `
                <h4>ุงูุณุคุงู ${questionCount + 1}</h4>
                <div class="form-group">
                    <label>ูุต ุงูุณุคุงู *</label>
                    <input type="text" class="question-text" placeholder="ุฃุฏุฎู ูุต ุงูุณุคุงู" required>
                </div>

                <div class="form-group">
                    <label>ุงูุฎูุงุฑุงุช (ููุตููุฉ ุจูุงุตูุฉ) *</label>
                    <input type="text" class="question-options" placeholder="ุงูุฎูุงุฑ 1, ุงูุฎูุงุฑ 2, ุงูุฎูุงุฑ 3, ุงูุฎูุงุฑ 4" required>
                </div>

                <div class="form-group">
                    <label>ุฑูู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ (1, 2, 3...) *</label>
                    <input type="number" class="question-answer" min="1" placeholder="1" required>
                </div>

                <button type="button" class="btn btn-danger" onclick="removeQuestion(this)">ุญุฐู ุงูุณุคุงู</button>
                <hr>
            `;

            container.appendChild(questionDiv);
        }

        /**
         * ุญุฐู ุณุคุงู
         */
        function removeQuestion(button) {
            button.parentElement.remove();
        }

        /**
         * ุชุญููู ุงูุงุฎุชุจุงุฑุงุช ููุฅุฏุงุฑุฉ
         */
        function loadQuizzesForAdmin() {
            readFromFirebase('quizzes', (data) => {
                const container = document.getElementById('quizzes-list');

                if (!data) {
                    container.innerHTML = '<p>ูุง ุชูุฌุฏ ุงุฎุชุจุงุฑุงุช</p>';
                    return;
                }

                container.innerHTML = '';

                Object.keys(data).forEach(key => {
                    const quiz = data[key];
                    const questionsCount = Object.keys(quiz.questions || {}).length;
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <div class="card-header">
                            <h3>${quiz.title}</h3>
                        </div>
                        <div class="card-body">
                            <p>${quiz.description}</p>
                            <p><strong>ูุณุชูู ุงูุตุนูุจุฉ:</strong> ${quiz.difficulty}</p>
                            <p><strong>ุนุฏุฏ ุงูุฃุณุฆูุฉ:</strong> ${questionsCount}</p>
                            <p><strong>ุงูุญุฏ ุงูุฒููู:</strong> ${quiz.time_limit > 0 ? quiz.time_limit + ' ุฏูููุฉ' : 'ุจุฏูู ุญุฏ'}</p>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-danger" onclick="deleteQuizItem('${key}')">ุญุฐู</button>
                        </div>
                    `;
                    container.appendChild(card);
                });
            });
        }

        /**
         * ุญุฐู ุงุฎุชุจุงุฑ
         */
        function deleteQuizItem(quizId) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุงุฎุชุจุงุฑุ')) {
                deleteFromFirebase(`quizzes/${quizId}`).then(() => {
                    loadQuizzesForAdmin();
                });
            }
        }

        /**
         * ูุนุงูุฌ ุฅุฑุณุงู ุฑุณุงูุฉ ุนุงูุฉ
         */
        function handleBroadcastMessage(event) {
            event.preventDefault();

            const sender = document.getElementById('broadcast-sender').value;
            const text = document.getElementById('broadcast-text').value;

            const message = {
                sender: sender,
                text: text,
                timestamp: new Date().toISOString(),
                type: 'broadcast'
            };

            addToFirebase('messages', message).then(() => {
                document.getElementById('broadcast-message-form').reset();
                loadMessagesForAdmin();
            });
        }

        /**
         * ุชุญููู ุงูุฑุณุงุฆู ููุฅุฏุงุฑุฉ
         */
        function loadMessagesForAdmin() {
            readFromFirebase('messages', (data) => {
                const container = document.getElementById('messages-list');

                if (!data) {
                    container.innerHTML = '<p>ูุง ุชูุฌุฏ ุฑุณุงุฆู</p>';
                    return;
                }

                container.innerHTML = '';

                Object.keys(data).reverse().forEach(key => {
                    const message = data[key];
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'message';
                    messageDiv.innerHTML = `
                        <div class="message-header">
                            <span class="message-sender">${message.sender}</span>
                            <span class="message-time">${new Date(message.timestamp).toLocaleString('ar-SA')}</span>
                        </div>
                        <div class="message-body">${message.text}</div>
                    `;
                    container.appendChild(messageDiv);
                });
            });
        }

        /**
         * ูุนุงูุฌ ุฅูุดุงุก ุชูุจูู ุฌุฏูุฏ
         */
        function handleCreateNotification(event) {
            event.preventDefault();

            const title = document.getElementById('notif-title').value;
            const message = document.getElementById('notif-message').value;
            const type = document.getElementById('notif-type').value;
            const priority = document.getElementById('notif-priority').value;

            const notification = {
                title: title,
                message: message,
                type: type,
                priority: priority,
                timestamp: new Date().toISOString()
            };

            addToFirebase('notifications', notification).then(() => {
                document.getElementById('notification-form').reset();
                loadNotificationsForAdmin();
            });
        }

        /**
         * ุชุญููู ุงูุชูุจููุงุช ููุฅุฏุงุฑุฉ
         */
        function loadNotificationsForAdmin() {
            readFromFirebase('notifications', (data) => {
                const container = document.getElementById('notifications-list');

                if (!data) {
                    container.innerHTML = '<p>ูุง ุชูุฌุฏ ุชูุจููุงุช</p>';
                    return;
                }

                container.innerHTML = '';

                Object.keys(data).reverse().forEach(key => {
                    const notification = data[key];
                    const alertDiv = document.createElement('div');
                    alertDiv.className = `alert alert-${notification.type || 'info'}`;
                    alertDiv.innerHTML = `
                        <strong>${notification.title}</strong><br>
                        ${notification.message}<br>
                        <small>ุงูุฃููููุฉ: ${notification.priority} | ${new Date(notification.timestamp).toLocaleString('ar-SA')}</small>
                    `;
                    container.appendChild(alertDiv);
                });
            });
        }

        /**
         * ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุงุฎุชุจุงุฑุงุช
         */
        function updateQuizStats() {
            getQuizResults((results) => {
                let totalAttempts = Object.keys(results).length;
                let totalScore = 0;
                let averagePercentage = 0;
                let passCount = 0;

                Object.keys(results).forEach(key => {
                    const result = results[key];
                    totalScore += result.percentage || 0;
                    if (result.percentage >= 60) passCount++;
                });

                if (totalAttempts > 0) {
                    averagePercentage = totalScore / totalAttempts;
                }

                const container = document.getElementById('quiz-stats-container');
                container.innerHTML = `
                    <div class="card">
                        <div class="card-header">
                            <h3>ุฅุฌูุงูู ุงููุญุงููุงุช</h3>
                        </div>
                        <div class="card-body">
                            <p style="font-size: 2rem; text-align: center; color: var(--secondary-color);">
                                ${totalAttempts}
                            </p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>ูุชูุณุท ุงููุณุจุฉ</h3>
                        </div>
                        <div class="card-body">
                            <p style="font-size: 2rem; text-align: center; color: var(--secondary-color);">
                                ${averagePercentage.toFixed(2)}%
                            </p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>ุนุฏุฏ ุงููุงุฌุญูู</h3>
                        </div>
                        <div class="card-body">
                            <p style="font-size: 2rem; text-align: center; color: var(--success-color);">
                                ${passCount}
                            </p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>ูุณุจุฉ ุงููุฌุงุญ</h3>
                        </div>
                        <div class="card-body">
                            <p style="font-size: 2rem; text-align: center; color: var(--secondary-color);">
                                ${totalAttempts > 0 ? ((passCount / totalAttempts) * 100).toFixed(2) : 0}%
                            </p>
                        </div>
                    </div>
                `;

                // ุชุญููู ุงูุชูุงุตูู
                loadQuizResultsDetails(results);
            });
        }

        /**
         * ุชุญููู ุชูุงุตูู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช
         */
        function loadQuizResultsDetails(results) {
            const container = document.getElementById('quiz-results-details');

            if (Object.keys(results).length === 0) {
                container.innerHTML = '<p>ูุง ุชูุฌุฏ ูุชุงุฆุฌ ุงุฎุชุจุงุฑุงุช ุจุนุฏ</p>';
                return;
            }

            let html = '<table style="width: 100%; border-collapse: collapse;">';
            html += '<tr style="background-color: var(--light-bg);">';
            html += '<th style="padding: 10px; border: 1px solid var(--border-color);">ุงูุงุฎุชุจุงุฑ</th>';
            html += '<th style="padding: 10px; border: 1px solid var(--border-color);">ุงููุชูุฌุฉ</th>';
            html += '<th style="padding: 10px; border: 1px solid var(--border-color);">ุงููุณุจุฉ ุงููุฆููุฉ</th>';
            html += '<th style="padding: 10px; border: 1px solid var(--border-color);">ุงูุชุงุฑูุฎ</th>';
            html += '</tr>';

            Object.keys(results).reverse().forEach(key => {
                const result = results[key];
                const statusColor = result.percentage >= 60 ? 'var(--success-color)' : 'var(--danger-color)';
                html += '<tr>';
                html += `<td style="padding: 10px; border: 1px solid var(--border-color);">ุงุฎุชุจุงุฑ #${result.quizId.substring(0, 8)}</td>`;
                html += `<td style="padding: 10px; border: 1px solid var(--border-color); text-align: center;">${result.score}/${result.totalQuestions}</td>`;
                html += `<td style="padding: 10px; border: 1px solid var(--border-color); text-align: center; color: ${statusColor}; font-weight: bold;">${result.percentage.toFixed(2)}%</td>`;
                html += `<td style="padding: 10px; border: 1px solid var(--border-color);">${new Date(result.timestamp).toLocaleDateString('ar-SA')}</td>`;
                html += '</tr>';
            });

            html += '</table>';
            container.innerHTML = html;
        }

        /**
         * ุชุตุฏูุฑ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช
         */
        function exportQuizResults() {
            getQuizResults((results) => {
                const data = [];

                Object.keys(results).forEach(key => {
                    const result = results[key];
                    data.push({
                        'ูุนุฑู ุงูุงุฎุชุจุงุฑ': result.quizId,
                        'ุงููุชูุฌุฉ': `${result.score}/${result.totalQuestions}`,
                        'ุงููุณุจุฉ ุงููุฆููุฉ': `${result.percentage.toFixed(2)}%`,
                        'ุงูุชุงุฑูุฎ': new Date(result.timestamp).toLocaleString('ar-SA')
                    });
                });

                exportToCSV(data, `quiz_results_${new Date().toISOString().split('T')[0]}.csv`);
            });
        }

        /**
         * ุงูุชููู ุจูู ุงูุฃูุณุงู
         */
        document.querySelectorAll('.sidebar a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const href = this.getAttribute('href');

                // ุฅุฒุงูุฉ ุงููุฆุฉ active ูู ุฌููุน ุงูุฑูุงุจุท
                document.querySelectorAll('.sidebar a').forEach(l => l.classList.remove('active'));
                this.classList.add('active');

                // ุฅุฎูุงุก ุฌููุน ุงูุฃูุณุงู
                document.querySelectorAll('main section').forEach(section => {
                    section.style.display = 'none';
                });

                // ุนุฑุถ ุงููุณู ุงููุฎุชุงุฑ
                const target = document.querySelector(href);
                if (target) {
                    target.style.display = 'block';

                    // ุชุญููู ุงูุจูุงูุงุช ุงูููุงุณุจุฉ
                    if (href === '#messages') {
                        loadMessagesForAdmin();
                    } else if (href === '#notifications') {
                        loadNotificationsForAdmin();
                    } else if (href === '#quiz-results') {
                        updateQuizStats();
                    }
                }
            });
        });

        // ุชุญููู ุงูุจูุงูุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        document.addEventListener('DOMContentLoaded', () => {
            loadQuizzesForAdmin();
            loadMessagesForAdmin();
            loadNotificationsForAdmin();
        });
    </script>
</body>
</html>
